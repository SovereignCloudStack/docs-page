<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-standards docs-doc-id-active/scs-0212-v1-requirements-for-container-registry">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Requirements for container registry | One platform — standardized, built and operated by many.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.scs.community/img/summit-social.png"><meta data-rh="true" name="twitter:image" content="https://docs.scs.community/img/summit-social.png"><meta data-rh="true" property="og:url" content="https://docs.scs.community/standards/active/scs-0212-v1-requirements-for-container-registry"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-standards-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-standards-current"><meta data-rh="true" property="og:title" content="Requirements for container registry | One platform — standardized, built and operated by many."><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.scs.community/standards/active/scs-0212-v1-requirements-for-container-registry"><link data-rh="true" rel="alternate" href="https://docs.scs.community/standards/active/scs-0212-v1-requirements-for-container-registry" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scs.community/standards/active/scs-0212-v1-requirements-for-container-registry" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="One platform — standardized, built and operated by many. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="One platform — standardized, built and operated by many. Atom Feed">






<link rel="preconnect" href="https://matomo.scs.community/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="https://matomo.scs.community/";_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.e9349ca9.css">
<link rel="preload" href="/assets/js/runtime~main.fe345add.js" as="script">
<link rel="preload" href="/assets/js/main.150bd3f2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="SCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="SCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/standards">Standards</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SovereignCloudStack/docs-page" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Requirements for container registry</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>A container registry is an infrastructure service to enable storing and accessing container
images. Images can be pushed to the registry by e.g. Continuous integration pipelines and
be pulled from by runtime environments like Kubernetes clusters.</p><p>Container registries could be publicly accessible e.g. Docker Hub, could be
self-hosted or hosted by cloud service providers (CSP). These container registries may
apply various access control mechanisms to restrict public access and make them private.
Both solutions offer a wide range of features that may or may not attract potential
users and CSPs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2><p>This proposal is motivated by use cases in which CSPs would like to offer
private container registries to their customers. The specific use cases should be
discussed, but overall CSP could offer a private container registry as a service or
CSP could offer a recipe (maintained by SCS) for customers to deploy the private
registry themselves utilizing CSP infrastructure. In both cases, the private
container registry should fulfill a set of needed requirements e.g. for security and
privacy.</p><p>The idea and purpose of this document is to specify what requirements a
specific technical container registry implementation (i.e. software solution) needs to
fulfill in the context of SCS.</p><p>Another purpose is the selection of an appropriate container registry
implementation that meets all defined requirements to make architectural
decision on what implementation will be used by the SCS.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-considerations">Design considerations<a href="#design-considerations" class="hash-link" aria-label="Direct link to Design considerations" title="Direct link to Design considerations">​</a></h2><p>There are numerous features to look for when evaluating a container registry solution.
Our decision process goes through two main stages:</p><ol><li><a href="#oss-health-check">OSS health check</a></li><li><a href="#required-and-desirable-features-check">Required and desirable features check</a></li></ol><p>The open-source software (OSS) health check is the first filter stage. This stage is
crucial in the context of SCS and container registry implementation should pass it to
promote itself to the second consideration stage. The second stage provides an overview
over the feature set of open source container registry implementations and map out
requirements (and nice-to-haves) against it to have a well-documented decision.</p><p>Note: Keep in mind that at the time of writing this document, we&#x27;ve made our best effort
to survey the container registry landscape based on publicly available materials.
If you find something outdated (with respect to the time of writing this document) or
outright erroneous, please submit a PR or raise an issue, and we&#x27;ll fix it right away.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oss-health-check">OSS health check<a href="#oss-health-check" class="hash-link" aria-label="Direct link to OSS health check" title="Direct link to OSS health check">​</a></h3><p>This section evaluates the health of the open-source projects that were selected from
the currently available solutions. The container registry software must fulfill all OSS
health checks defined by the <a href="https://github.com/SovereignCloudStack/standards/blob/main/Drafts/OSS-Health.md" target="_blank" rel="noopener noreferrer">OSS-Health</a>
document. The main health checks are:</p><ul><li>Four Opens (code is fully open source, community is open and diverse, development
process is open, design process is open)</li><li>Maturity</li><li>Security</li><li>Activity</li><li>Lock-in risk assessment</li></ul><p>Each selected OSS project is evaluated based on the above checks, and it is classified
into one of three categories as follows:</p><ul><li><p>✔️ The project passed all OSS health checks and will be considered
further as a valid candidate.</p></li><li><p>❔ The project passed almost all OSS health checks.
There is place for improvement, but the missing points are not crucial from the OSS
health check perspective. The project will be considered further as a valid candidate.</p></li><li><p>❌ The project does not pass the OSS health checks. Some OSS health check
showstoppers have been found (e.g. open core software, not actively maintained).
The project is filtered at this stage and won&#x27;t be considered further.</p></li></ul><p>Refer to the list of evaluated projects with their classified categories and comments.</p><ul><li><p>✔️ <a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">Harbor</a></p><ul><li>Harbor project meets all &quot;four opens&quot;<ul><li>Source code is open and available under the <a href="https://github.com/goharbor/harbor/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Apache 2 license</a></li><li>Community is <a href="https://github.com/goharbor/harbor#community" target="_blank" rel="noopener noreferrer">open</a>, structured and
well organized via <a href="https://github.com/goharbor/community" target="_blank" rel="noopener noreferrer">workgroups</a> and
various communications channels e.g. Slack, mailing lists, etc.
(#harbor Slack channel contains 3k+ members)</li><li>The development process is open via GitHub issues and well described in the
<a href="https://github.com/goharbor/harbor/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">contributing</a>
document</li><li>The design process is open via GitHub issues. Proposals are <a href="https://github.com/goharbor/community/tree/main/proposals" target="_blank" rel="noopener noreferrer">public</a>.
The decision process is well described as well. The project&#x27;s roadmap is
available in the <a href="https://github.com/goharbor/harbor/blob/main/ROADMAP.md" target="_blank" rel="noopener noreferrer">roadmap</a> document</li></ul></li><li>Maturity is on the CNCF <a href="https://www.cncf.io/projects/harbor/" target="_blank" rel="noopener noreferrer">graduation</a> level.
CNCF graduated projects are considered to be stable, widely adopted and production-ready</li><li>Security<ul><li>The security disclosure and response policy is well described in the project&#x27;s
<a href="https://github.com/goharbor/harbor/blob/main/SECURITY.md" target="_blank" rel="noopener noreferrer">security</a> document</li><li>The code is reviewed within a standard PR process</li></ul></li><li>Activity<ul><li>250+ contributors, 4k+ forks, 13k+ GitHub stars</li><li>The project has been <a href="https://github.com/goharbor/harbor/blob/main/ADOPTERS.md" target="_blank" rel="noopener noreferrer">adopted</a>
by many companies that run Harbor in their production environments</li><li>The project collaborates with other communities and projects
(see <a href="https://goharbor.io/community/" target="_blank" rel="noopener noreferrer">Partners of Harbor</a> section of the
project&#x27;s website)</li><li>The project is visible and actively contributes to various conferences, e.g.
<a href="https://goharbor.io/blog/harbor-at-fosdem-2022/" target="_blank" rel="noopener noreferrer">FOSDEM 22</a>,
<a href="https://www.youtube.com/watch?v=REgvBPH369M" target="_blank" rel="noopener noreferrer">KubeCon Europe</a>, etc.</li></ul></li><li>Lock-in risk assessment<ul><li>The project&#x27;s <a href="https://github.com/goharbor/community/blob/main/MAINTAINERS.md" target="_blank" rel="noopener noreferrer">maintainers</a>
document shows that there are a sufficient number of core
maintainers/contributors that differ over various companies, we therefore deem
the lock-in risk arising from a single point of failure to be low</li></ul></li></ul></li><li><p>✔️ <a href="https://github.com/dragonflyoss/Dragonfly2" target="_blank" rel="noopener noreferrer">Dragonfly</a></p><ul><li>Dragonfly project meets all &quot;four opens&quot;<ul><li>Source code is open and available under the <a href="https://github.com/dragonflyoss/Dragonfly2/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Apache 2 license</a></li><li>Community is <a href="https://github.com/dragonflyoss/Dragonfly2#community" target="_blank" rel="noopener noreferrer">open</a>
organized via multiple channels e.g. Slack, mailing lists, etc.
(#dragonfly Slack channel contains ~50 members)</li><li>The development process is open via GitHub issues and well described in the
<a href="https://github.com/dragonflyoss/Dragonfly2/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">contributing</a> document</li><li>The design process is open via GitHub issues. The project&#x27;s roadmap is available in
the project&#x27;s <a href="https://d7y.io/docs/others/roadmap/#2022-roadmap" target="_blank" rel="noopener noreferrer">webpage</a></li></ul></li><li>Maturity is on the CNCF <a href="https://www.cncf.io/projects/dragonfly/" target="_blank" rel="noopener noreferrer">incubating</a> level
CNCF incubating project is considered stable and used in production by users with
the healthy pool of contributors</li><li>Security<ul><li>The security disclosure is handled via a dedicated email address</li><li>The code is reviewed within a standard PR process</li></ul></li><li>Activity<ul><li>30+ contributors, 100+ forks, 1k+ GitHub stars</li><li>The project has been <a href="https://github.com/dragonflyoss/Dragonfly2/blob/main/ADOPTERS.md" target="_blank" rel="noopener noreferrer">adopted</a>
by many companies that run Harbor in their production environments</li><li>The project is visible and actively contributes to various conferences,
e.g. <a href="https://www.youtube.com/watch?v=LcxBgmmeA80" target="_blank" rel="noopener noreferrer">KubeCon North America</a>,
<a href="https://www.youtube.com/watch?v=MGNtPHQYP14" target="_blank" rel="noopener noreferrer">KubeCon Europe</a>, etc.</li></ul></li><li>Lock-in risk assessment<ul><li>The list of the project&#x27;s <a href="https://github.com/dragonflyoss/Dragonfly2/blob/main/MAINTAINERS.md" target="_blank" rel="noopener noreferrer">maintainers</a>
includes contributors from various companies and the <a href="https://dragonfly.devstats.cncf.io/d/7/companies-contributing-in-repository-groups" target="_blank" rel="noopener noreferrer">companies contributing dashboard</a>
shows that ~10 companies are actively contributing to a repository group</li></ul></li></ul></li><li><p>❔ <a href="https://github.com/quay/quay" target="_blank" rel="noopener noreferrer">Project Quay</a></p><ul><li>Project Quay meets all &quot;four opens&quot;<ul><li>Source code is open and available under the <a href="https://github.com/quay/quay/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache 2 license</a></li><li>Community is <a href="https://github.com/quay/quay#community" target="_blank" rel="noopener noreferrer">open</a> organized via mailing
list and IRC</li><li>Development process is open via <a href="https://issues.redhat.com/projects/PROJQUAY/issues" target="_blank" rel="noopener noreferrer">JBoss JIRA</a>
issues and well described in the <a href="https://github.com/quay/quay/blob/master/GOVERNANCE.md" target="_blank" rel="noopener noreferrer">governance</a> document</li><li>Design process is open via <a href="https://issues.redhat.com/projects/PROJQUAY/issues" target="_blank" rel="noopener noreferrer">JBoss JIRA</a>
issues. The project&#x27;s roadmap is available on the project&#x27;s <a href="https://www.projectquay.io/#contribute" target="_blank" rel="noopener noreferrer">webpage</a></li></ul></li><li>Maturity<ul><li>Project Quay is an open-source project that starts <a href="https://github.com/quay/quay/commit/0349af754204375d74ac5833713b607398981ff7" target="_blank" rel="noopener noreferrer">~9 years ago</a>.
It powers Red Hat enterprise products Red Hat Quay and Quay.io, which are used in
a productive way by many. Therefore, the project&#x27;s maturity is at the good level</li></ul></li><li>Security<ul><li>The security disclosure is handled via a dedicated email address</li><li>The code is reviewed within a standard PR process</li></ul></li><li>Activity<ul><li>50+ contributors, 200+ forks, 2k+ GitHub stars</li><li>The project has been used by many <a href="https://www.projectquay.io" target="_blank" rel="noopener noreferrer">companies</a> that
run Quay in their production environments</li></ul></li><li>Lock-in risk assessment<ul><li>The project&#x27;s owners/maintainers list is not publicly available and is stored in
the <a href="https://github.com/quay/quay-docs#how-do-i-set-up" target="_blank" rel="noopener noreferrer">downstream repository</a>.
Therefore, it is hard to distinguish the risk of project failure caused by low
diversity across the companies. This should be improved</li></ul></li></ul></li><li><p>❌ <a href="https://github.com/sapcc/keppel" target="_blank" rel="noopener noreferrer">Keppel</a></p><ul><li>The project seems to be not widely used in a productive way and also the activity
around is currently not on a good level (5+ contributors). The development
process as well as the design process seem to be open, but not documented yet</li></ul></li><li><p>❌ <a href="https://github.com/sonatype/nexus-public" target="_blank" rel="noopener noreferrer">Nexus</a></p><ul><li>Nexus is an <strong>open core</strong> software that offers paid <a href="https://www.sonatype.com/products/repository-oss-vs-pro-features" target="_blank" rel="noopener noreferrer">pro version</a> with advanced features</li></ul></li><li><p>❌ <a href="https://jfrog.com/community/open-source/" target="_blank" rel="noopener noreferrer">JFrog</a></p><ul><li>JFrog Artifactory is shipped as an <strong>open core</strong> <a href="https://jfrog.com/community/open-source/" target="_blank" rel="noopener noreferrer">software</a>
with limited features. The software is primarily offered as a paid <a href="https://jfrog.com/pricing/#devops-onprem" target="_blank" rel="noopener noreferrer">pro version</a></li></ul></li><li><p>❌ <a href="https://github.com/uber/kraken" target="_blank" rel="noopener noreferrer">Kraken</a></p><ul><li>It seems that the project is not actively maintained as is discussed in the related
project&#x27;s <a href="https://github.com/uber/kraken/issues/313" target="_blank" rel="noopener noreferrer">issue</a></li></ul></li><li><p>❌ <a href="https://github.com/SUSE/Portus" target="_blank" rel="noopener noreferrer">Portus</a></p><ul><li>It seems that the project is not actively maintained as is discussed in the related
project&#x27;s <a href="https://github.com/SUSE/Portus/issues/2352" target="_blank" rel="noopener noreferrer">issue</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-and-desirable-features-check">Required and desirable features check<a href="#required-and-desirable-features-check" class="hash-link" aria-label="Direct link to Required and desirable features check" title="Direct link to Required and desirable features check">​</a></h3><p>This section provides an overview of the feature set of open source container registry
implementations (which passed the OSS health stage above) and map out requirements
(and nice-to-haves) against it. The container registry software must be robust enough,
to be able to operate under heavy load (e.g. high availability (HA) mode, federation, etc.) and
the crucial feature is security.
We defined a set of required features that the container registry implementation must
have and also a set of desirable (nice to have) features are defined and evaluated here.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="required-features">Required features<a href="#required-features" class="hash-link" aria-label="Direct link to Required features" title="Direct link to Required features">​</a></h4><ul><li>Audit Logs<ul><li>Ability to record use in auditable logs so that activity can be traced to a single user</li></ul></li><li>Authentication of system identities<ul><li>Support for authenticating system identities like Kubernetes clusters. Ideally supporting dynamic identity tokens from some IdP; Less ideal: Supporting static &quot;system tokens&quot;</li></ul></li><li>Authentication of users<ul><li>Support for multiple authentication systems (IdM integration). User and user account management</li></ul></li><li>Authorization<ul><li>Role-based access control to ensure strict access controls</li></ul></li><li>Automation<ul><li>Integration with CI/CD tools e.g. via webhooks</li></ul></li><li>Vulnerability scanning<ul><li>Reveal security vulnerabilities in container images</li></ul></li><li>Content Trust and Validation<ul><li>Verify image authenticity before running - image signing</li></ul></li><li>Multi-tenancy<ul><li>Container registry is able to serve multiple tenants (projects, teams, namespaces). It can be implemented also on the storage level, see e.g. <a href="https://github.com/sapcc/keppel#overview" target="_blank" rel="noopener noreferrer">Keppel</a></li></ul></li><li>Backup and restore<ul><li>It is important for disaster recovery and data migration scenarios</li></ul></li><li>Monitoring<ul><li>Observability is a key feature for operating a service in production so the container registry should expose key metrics</li></ul></li><li>HA mode<ul><li>Ensure system uptime even in the event of a failure</li></ul></li><li>Registry replication<ul><li>Replication allows users to replicate container images between registries of the same instances and between registries of different instances as well</li></ul></li><li>Proxy cache (pull-through cache)<ul><li>Proxy cache allows you to use a container registry to proxy and cache images from a target public or private registry</li></ul></li><li>Quota management<ul><li>Control over resource use</li></ul></li><li>Garbage collection<ul><li>Removing blobs from the filesystem when they are no longer referenced by a manifest</li></ul></li><li>Retention policy<ul><li>Reduce the number of image tags, many of which might not be required after a given time or once a subsequent image tag has superseded them</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="desirable-features">Desirable features<a href="#desirable-features" class="hash-link" aria-label="Direct link to Desirable features" title="Direct link to Desirable features">​</a></h4><ul><li>Additionally supported artifacts<ul><li>Additional artifacts that the registry is able to store in addition to OCI artifacts, e.g. Java, Node.js, or Python packages</li></ul></li><li>Integration possibilities<ul><li>Ability to cooperate with another software solution in order to improve own feature set (e.g. integration of P2P solution for improving container image distribution (download speed and stability, high scalability ...))</li></ul></li><li>Deployment capabilities<ul><li>How could be a container registry deployed (only &quot;official&quot; ways are mentioned)</li></ul></li><li>Administration capabilities &quot;as a code&quot;<ul><li>Ability to manage container registry via &quot;as a code&quot; solutions, e.g. Ansible role</li></ul></li></ul><p>Refer to the table of evaluated projects with their features. Note that only container
registry implementations that passed the OSS health stage (Harbor, Quay, and Dragonfly)
are evaluated here.</p><table><thead><tr><th>Features</th><th>Harbor</th><th>Quay</th><th>Dragonfly</th></tr></thead><tbody><tr><td>Audit Logs</td><td>✓</td><td>✓</td><td>✗</td></tr><tr><td>Authentication of system identities</td><td>✓ Robot Accounts</td><td>✓ Robot Accounts</td><td>✗</td></tr><tr><td>Authentication of users</td><td>✓ Local database, LDAP, OIDC, UAA</td><td>✓ Local database, LDAP, Keystone, JWT</td><td>✓ Local database</td></tr><tr><td>Authorization</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Automation</td><td>✓ Webhooks (HTTP, Slack)</td><td>✓ Webhooks (HTTP, Slack, E-mail ...), building images</td><td>✗</td></tr><tr><td>Vulnerability scanning</td><td>✓ Trivy, Clair</td><td>✓ Clair</td><td>✗</td></tr><tr><td>Content Trust and Validation</td><td>✓ Cosign</td><td>✓ Cosign</td><td>✗</td></tr><tr><td>Multi-tenancy</td><td>✓ (not on the storage level)</td><td>✓ (not on the storage level)</td><td>✓ (not on the storage level)</td></tr><tr><td>Backup and restore</td><td>✓</td><td>✓</td><td>✗</td></tr><tr><td>Monitoring</td><td>✓ Prometheus metrics, Tracing</td><td>✓ Prometheus metrics, Tracing (only for Clair)</td><td>✓ Prometheus metrics, Tracing</td></tr><tr><td>HA mode</td><td>✓</td><td>✓</td><td>✗</td></tr><tr><td>Registry replication</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Proxy cache</td><td>✓</td><td>✓ Feature is in the technology preview stage (non production ready)</td><td>✗</td></tr><tr><td>Quota management</td><td>✓ Based on storage consumption</td><td>✓ Based on storage consumption</td><td>✗</td></tr><tr><td>Garbage collection</td><td>✓ Non-blocking</td><td>✓ Non-blocking</td><td>✗</td></tr><tr><td>Retention policy</td><td>✓ Multiple tag retention rules</td><td>✓ Only tag expiration rules</td><td>✗</td></tr><tr><td>Additional supported artifacts</td><td>✗ (only OCI artifacts)</td><td>✗ (only OCI artifacts)</td><td>✓ Maven, YUM</td></tr><tr><td>Integration possibilities</td><td>✓ Dragonfly (P2P), Kraken (P2P)</td><td>✗</td><td>✓ Harbor, Nydus, eStargz</td></tr><tr><td>Deployment capabilities</td><td>✓ Docker-compose, Helm chart, Operator</td><td>✓ Docker-compose, Operator</td><td>✓ Docker-compose, Helm chart</td></tr><tr><td>Administration capabilities</td><td>✓ Terraform, CRDs, Client libraries</td><td>✓ Ansible, Client libraries</td><td>✓ Client libraries</td></tr></tbody></table><p>Notes:</p><ul><li>Automation: Harbor should support webhooks following CloudEvents spec in the <a href="https://github.com/goharbor/harbor/issues/17748" target="_blank" rel="noopener noreferrer">next release</a></li><li>Content Trust and Validation: Harbor announced the deprecation of <a href="https://github.com/goharbor/harbor/discussions/16612" target="_blank" rel="noopener noreferrer">Notary</a>
integration, hence it is not mentioned in the table</li><li>Multi-tenancy: Harbor, Quay, as well as Dragonfly, operates on a single storage
backend (e.g. S3), i.e. the storage of container images is shared between tenants</li><li>Additional supported artifacts: Harbor announced the deprecation of <a href="https://github.com/goharbor/harbor/discussions/15057" target="_blank" rel="noopener noreferrer">Chartmuseum</a>
integration, hence it is not mentioned in the table</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3><p>A wide range of open-source container registry projects (Quay, Harbor, Dragonfly,
Keppel, Portus, Kraken, etc.) has been carefully evaluated based on the two main
factors: the open-source health and range of supported features.</p><p>The open-source software health is crucial and container registry implementation should
pass it. The OSS health check evaluates several important metrics
of an open source software like whether the code/community/development/design is
fully open or whether the project&#x27;s maturity, security, and activity are on the desired
level. This check also evaluates the lock-in risk due to possible single points of
failure or internal project conflicts and several other aspects.
Overall, three projects passed the OSS health checks:</p><ul><li><a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">Harbor</a></li><li><a href="https://github.com/quay/quay" target="_blank" rel="noopener noreferrer">Project Quay</a></li><li><a href="https://github.com/dragonflyoss/Dragonfly2" target="_blank" rel="noopener noreferrer">Dragonfly</a></li></ul><p>The above projects were then evaluated from the &quot;supported features&quot; perspective.
The <a href="#required-and-desirable-features-check">Required and desirable features check</a>
investigated the feature set of open-source container registry implementations and
mapped SCS requirements (and nice-to-haves) against it. The list of required features
is quite long and contains features that are primarily focused on security
(authentication, vulnerability scanning, content trust, and validation, etc.),
scalability (HA mode, registry replication, p2p integration, etc.) and visibility
(monitoring), see the full list <a href="#required-and-desirable-features-check">here</a>.
These requirements should ensure that the selected container registry implementation
could be offered by CSPs as a secure and enterprise-ready solution.</p><p>The following section compares projects Dragonfly, Quay, and Harbor.</p><p><a href="https://github.com/dragonflyoss/Dragonfly2" target="_blank" rel="noopener noreferrer">Dragonfly</a> is a healthy open-source project with a growing community
and CNCF incubating maturity level. It is considered stable, and widely used by many
companies in their production environments. We currently see that it is not as
feature-rich as Harbor or Quay, hence it is not considered the best choice here.
It seems, that its main aim (currently) is to offer (an efficient, stable, and secure)
container distribution solution based on p2p technology. This improves download
efficiency and saves bandwidth across CSPs. It also offers integration possibilities
that allow one to use it as a p2p distribution network via a &quot;preheat&quot; API. This
integration was implemented in the Harbor project via Dragonfly &quot;preheat&quot; adapter, and
both parties may benefit from the integration. Harbor profits from Dragonfly&#x27;s p2p
distribution capabilities and on the other hand the Dragonfly project profits from
Harbor&#x27;s feature-rich container registry &quot;frontend&quot;.</p><p><a href="https://github.com/quay/quay" target="_blank" rel="noopener noreferrer">Quay</a> is an open-source project maintained by Red Hat. Its OSS health is
on a good level, the surrounding community is growing, and we consider it to be quite
mature as it powers enterprise solutions like Red Hat Quay and Quay.io.
Besides this, there is still a place for OSS health improvement. It is hard to
distinguish the risk of project failure caused by low diversity across the companies
because the project&#x27;s owners/maintainers list is not publicly available and is stored in
the Red Hat private repository.
Its feature set is impressive and this project fulfills all must-haves defined in
this document. Quay gives you security over your repositories with image
vulnerability scanning (Clair integration), content validation (Cosign integration),
and access controls. Harbor stands out here as it allows users to use also project Trivy
for vulnerability scanning. Project Quay also provides a scalable open-source
platform to host container images across any size organization. One drawback in
comparison to Harbor is that the proxy cache feature is still marked as a
<a href="https://docs.projectquay.io/use_quay.html#quay-as-cache-proxy" target="_blank" rel="noopener noreferrer">Technology Preview</a>,
hence this feature may not be completely production-ready yet. On the other hand,
the project Quay supports <a href="https://docs.projectquay.io/use_quay.html#build-support" target="_blank" rel="noopener noreferrer">building Dockerfiles</a>
using a set of workers on e.g. Kubernetes. Build triggers, such as GitHub webhooks
can be configured to automatically build new versions of repositories when new code is
committed. This feature is not supported by the <a href="https://github.com/goharbor/harbor/issues/6235" target="_blank" rel="noopener noreferrer">Harbor project</a>.</p><p><a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">Harbor</a> is an outstanding open-source, community-led project with fully open and
well-documented processes. Its large and thriving community powers the fast-growing
feature set and attracts more and more developers and companies to active contributions.
Harbor&#x27;s CNCF graduation in 2020 made it one of the best choices for enterprise
customers that want to operate container registries securely and in a large scale.
Its community size, landscape, and CNCF graduation make a significant difference in
comparison to Quay&#x27;s open-source health capabilities.
The list of supported features is also impressive. This project fulfills all must-haves
defined in this document and overcome project Quay with a production-ready proxy cache
feature and more options that the user may use in case of image vulnerability scanning.
In addition, Harbor profits from p2p distribution capabilities via integration of p2p
solutions like Kraken and Dragonfly. It is worth mentioning that Harbor, by design,
operates on a single storage backend (e.g. S3). It means that the storage of container
images is shared even when the Harbor instance serves multiple tenants. The same
approach is used in Quay and Dragonfly projects, but e.g. Keppel uses multi-tenant-aware
storage drivers instead so that each customer gets their own separate storage backend.
CSP that considers offering container registry &quot;as a service&quot; solution based on Harbor
should be aware of this shared storage backend architecture.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision">Decision<a href="#decision" class="hash-link" aria-label="Direct link to Decision" title="Direct link to Decision">​</a></h2><p>Based on the research and conclusion above we&#x27;ve decided to use the <strong>Harbor</strong> project
as a container registry implementation for the SCS ecosystem.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#design-considerations" class="table-of-contents__link toc-highlight">Design considerations</a><ul><li><a href="#oss-health-check" class="table-of-contents__link toc-highlight">OSS health check</a></li><li><a href="#required-and-desirable-features-check" class="table-of-contents__link toc-highlight">Required and desirable features check</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li><li><a href="#decision" class="table-of-contents__link toc-highlight">Decision</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/!TiDqlLmEUaXqTemaLc:matrix.org?via=matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fosstodon.org/@sovereigncloudstack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SovereignCloudStack/docs-page" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Sovereign Cloud Stack, SCS and the logo are registered trademarks of the Open Source Business Alliance e.V. — Other trademarks are property of their respective owners.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fe345add.js"></script>
<script src="/assets/js/main.150bd3f2.js"></script>
</body>
</html>