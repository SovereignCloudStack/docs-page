"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[193],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),m=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=m(e.components);return i.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=m(n),g=a,d=p["".concat(l,".").concat(g)]||p[g]||c[g]||r;return n?i.createElement(d,o(o({ref:t},u),{},{components:n})):i.createElement(d,o({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var m=2;m<r;m++)o[m]=n[m];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8685:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>m});var i=n(7462),a=(n(7294),n(3905));const r={},o="Image definitions",s={unversionedId:"iaas/components/openstack-image-manager/configuration",id:"iaas/components/openstack-image-manager/configuration",title:"Image definitions",description:"The configuration consists of different parameter settings, such as values for",source:"@site/docs/02-iaas/components/openstack-image-manager/configuration.md",sourceDirName:"02-iaas/components/openstack-image-manager",slug:"/iaas/components/openstack-image-manager/configuration",permalink:"/docs/iaas/components/openstack-image-manager/configuration",draft:!1,editUrl:"https://github.com/SovereignCloudStack/docs-page/tree/main/docs/02-iaas/components/openstack-image-manager/configuration.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Quickstart",permalink:"/docs/iaas/components/openstack-image-manager/quickstart"},next:{title:"Contribute",permalink:"/docs/iaas/components/openstack-image-manager/contribute"}},l={},m=[{value:"Image with regular rebuilds",id:"image-with-regular-rebuilds",level:2},{value:"Image without regular rebuild",id:"image-without-regular-rebuild",level:2},{value:"Modify image properties",id:"modify-image-properties",level:2},{value:"Modify image tags",id:"modify-image-tags",level:2},{value:"Deactivate/reactivate image",id:"deactivatereactivate-image",level:2},{value:"Visibility",id:"visibility",level:2}],u={toc:m};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"image-definitions"},"Image definitions"),(0,a.kt)("p",null,"The configuration consists of different parameter settings, such as values for\nminimum RAM or the visibility of the image. Have a look at the examples below\nfor all parameters. After a change to the configuration, validate it with\n",(0,a.kt)("strong",{parentName:"p"},"tox -- --dry-run"),"."),(0,a.kt)("h2",{id:"image-with-regular-rebuilds"},"Image with regular rebuilds"),(0,a.kt)("p",null,"This type of image definition is used for images that are rebuilt at regular\nintervals. For example, this is the case for the daily builds of the Ubuntu\nimages."),(0,a.kt)("p",null,"The attribute ",(0,a.kt)("inlineCode",{parentName:"p"},"multi: true")," is set."),(0,a.kt)("p",null,"With this type of image definition, the version of the distribution (or product,\nwhatever is contained in the image) used is already in the name of the image\ndefinition. The ",(0,a.kt)("inlineCode",{parentName:"p"},"version")," properties from the definition's ",(0,a.kt)("inlineCode",{parentName:"p"},"versions")," list\nare appended only to older iterations of the image as timestamp suffixes\nin parentheses upon each rotation (except for the latest entry)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"images:\n  - name: Ubuntu 16.04\n    format: qcow2\n    login: ubuntu\n    min_disk: 8\n    min_ram: 512\n    status: active\n    visibility: public\n    multi: true\n    meta:\n      architecture: x86_64\n      hw_disk_bus: scsi\n      hw_scsi_model: virtio-scsi\n      hw_watchdog_action: reset\n      os_distro: ubuntu\n      os_version: '16.04'\n    tags: []\n    versions:\n      - version: '20180928'\n        url: https://cloud-images.ubuntu.com/xenial/20180928/xenial-server-cloudimg-amd64-disk1.img\n      - version: '20181004'\n        url: https://cloud-images.ubuntu.com/xenial/20181004/xenial-server-cloudimg-amd64-disk1.img\n")),(0,a.kt)("p",null,"This configuration creates the following images:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04 (20180928)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04"))),(0,a.kt)("p",null,"If a newer build is added, the following rotation takes place:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04 (20180928)")," does not change"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04")," becomes ",(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04 (20181004)")),(0,a.kt)("li",{parentName:"ul"},"the new image becomes ",(0,a.kt)("strong",{parentName:"li"},"Ubuntu 16.04"))),(0,a.kt)("p",null,"By default the last three images will be visible. When a fourth image is added, the visibility of\nthe last image in the list is changed to ",(0,a.kt)("strong",{parentName:"p"},"community")," and the image can be deleted in the future."),(0,a.kt)("h2",{id:"image-without-regular-rebuild"},"Image without regular rebuild"),(0,a.kt)("p",null,"This type of image definition is used for images that are not rebuilt. For example,\nthis is the case for the flatcar images. For each release of Flatcar there is exactly\none image which will not be rebuilt in the future."),(0,a.kt)("p",null,"The attribute ",(0,a.kt)("inlineCode",{parentName:"p"},"multi: false")," is set."),(0,a.kt)("p",null,"With this type of image definition, the version of the distribution (or product,\nwhatever is contained in the image) used is not in the name of the image definition.\nInstead, the ",(0,a.kt)("inlineCode",{parentName:"p"},"version")," properties from the image definition's ",(0,a.kt)("inlineCode",{parentName:"p"},"versions")," list\nare appended as static version suffixes to the images' names."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"images:\n  - name: RancherOS\n    format: qcow2\n    login: rancher\n    min_disk: 8\n    min_ram: 2048\n    status: active\n    visibility: public\n    multi: false\n    meta:\n      architecture: x86_64\n      hw_disk_bus: scsi\n      hw_scsi_model: virtio-scsi\n      hw_watchdog_action: reset\n    tags: []\n    versions:\n      - version: '1.3.0'\n        url: https://github.com/rancher/os/releases/download/v1.3.0/rancheros-openstack.img\n      - version: '1.4.0'\n        url: https://github.com/rancher/os/releases/download/v1.4.0/rancheros-openstack.img\n      - version: '1.4.1'\n        url: https://github.com/rancher/os/releases/download/v1.4.1/rancheros-openstack.img\n")),(0,a.kt)("p",null,"This configuration creates the following images:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"RancherOS 1.3.0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"RancherOS 1.4.0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"RancherOS 1.4.1"))),(0,a.kt)("p",null,"If a new version is added, no rotation takes place. The new version is added\nas ",(0,a.kt)("strong",{parentName:"p"},"RancherOS x.y.z"),". Here also the visibility of older images is not changed."),(0,a.kt)("h2",{id:"modify-image-properties"},"Modify image properties"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Removal of properties is not yet possible"),(0,a.kt)("li",{parentName:"ul"},"URL, name and format can not be changed"),(0,a.kt)("li",{parentName:"ul"},"Any keys can be added to ",(0,a.kt)("strong",{parentName:"li"},"meta"),", these will be added to the image"),(0,a.kt)("li",{parentName:"ul"},"Existing keys in ",(0,a.kt)("strong",{parentName:"li"},"meta")," can be changed, the same applies to ",(0,a.kt)("strong",{parentName:"li"},"min_disk"),"\nand ",(0,a.kt)("strong",{parentName:"li"},"min_ram"))),(0,a.kt)("h2",{id:"modify-image-tags"},"Modify image tags"),(0,a.kt)("p",null,"You can tag images like described in the Usage section or you can add or remove tags to the ",(0,a.kt)("strong",{parentName:"p"},"tags")," list."),(0,a.kt)("h2",{id:"deactivatereactivate-image"},"Deactivate/reactivate image"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"deactivation: change ",(0,a.kt)("strong",{parentName:"li"},"status")," to ",(0,a.kt)("strong",{parentName:"li"},"deactivated")),(0,a.kt)("li",{parentName:"ul"},"reactivation: change ",(0,a.kt)("strong",{parentName:"li"},"status")," to ",(0,a.kt)("strong",{parentName:"li"},"active"))),(0,a.kt)("p",null,"Also you can deactivate images like described in the Usage section."),(0,a.kt)("h2",{id:"visibility"},"Visibility"),(0,a.kt)("p",null,"A full documentation about the visibility of images you can find in the\n",(0,a.kt)("a",{parentName:"p",href:"https://developer.openstack.org/api-ref/image/v2/index.html"},"OpenStack API Documentation")," --\x3e ",(0,a.kt)("strong",{parentName:"p"},"Image visibility")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"public: set ",(0,a.kt)("strong",{parentName:"li"},"visibility")," to ",(0,a.kt)("strong",{parentName:"li"},"public")),(0,a.kt)("li",{parentName:"ul"},"community: set ",(0,a.kt)("strong",{parentName:"li"},"visibility")," to ",(0,a.kt)("strong",{parentName:"li"},"community")),(0,a.kt)("li",{parentName:"ul"},"shared: set ",(0,a.kt)("strong",{parentName:"li"},"visibility")," to ",(0,a.kt)("strong",{parentName:"li"},"shared")),(0,a.kt)("li",{parentName:"ul"},"private: set ",(0,a.kt)("strong",{parentName:"li"},"visibility")," to ",(0,a.kt)("strong",{parentName:"li"},"private"))))}c.isMDXComponent=!0}}]);