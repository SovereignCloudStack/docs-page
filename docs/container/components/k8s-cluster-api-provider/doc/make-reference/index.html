<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-container/components/k8s-cluster-api-provider/doc/make-reference">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Makefile reference | One platform — standardized, built and operated by many.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.scs.community/img/summit-social.png"><meta data-rh="true" name="twitter:image" content="https://docs.scs.community/img/summit-social.png"><meta data-rh="true" property="og:url" content="https://docs.scs.community/docs/container/components/k8s-cluster-api-provider/doc/make-reference"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Makefile reference | One platform — standardized, built and operated by many."><meta data-rh="true" name="description" content="This is a reference to the Makefile targets."><meta data-rh="true" property="og:description" content="This is a reference to the Makefile targets."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.scs.community/docs/container/components/k8s-cluster-api-provider/doc/make-reference"><link data-rh="true" rel="alternate" href="https://docs.scs.community/docs/container/components/k8s-cluster-api-provider/doc/make-reference" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scs.community/docs/container/components/k8s-cluster-api-provider/doc/make-reference" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="One platform — standardized, built and operated by many. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="One platform — standardized, built and operated by many. Atom Feed">






<link rel="preconnect" href="https://matomo.scs.community/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="https://matomo.scs.community/";_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.e9349ca9.css">
<link rel="preload" href="/assets/js/runtime~main.fe345add.js" as="script">
<link rel="preload" href="/assets/js/main.150bd3f2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="SCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="SCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/standards">Standards</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SovereignCloudStack/docs-page" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/iaas-layer">IaaS Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;IaaS Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/container-layer">Container Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Container Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/components-1">Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;Components&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/k8s-cluster-api-provider">K8s Cluster API Provider</a><button aria-label="Toggle the collapsible sidebar category &#x27;K8s Cluster API Provider&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/requirements">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/make-reference">Makefile reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/application-credentials">Application Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/Maintenance_and_Troubleshooting">Maintenance and Troubleshooting Guide for SCS k8s-cluster-api-provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/LoadBalancer-ExtTrafficLocal">Why externalTrafficPolicy: local?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/Upgrade-Guide">SCS k8s-cluster-api-provider upgrade guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/container/components/k8s-cluster-api-provider/doc/usage/">Usage</a></div></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/operating-scs">Operating SCS</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operating SCS&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/releases">Releases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Releases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/container-layer"><span itemprop="name">Container Layer</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/components-1"><span itemprop="name">Components</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/k8s-cluster-api-provider"><span itemprop="name">K8s Cluster API Provider</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Makefile reference</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Makefile reference</h1><p>This is a reference to the Makefile targets.</p><p>Almost all targets require the <code>ENVIRONMENT</code> variable to be set to the name of the environment you want to use.
(See <a href="/docs/container/components/k8s-cluster-api-provider/doc/requirements#environments">Environments</a> in the requirements documentation for more information.)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-commands">General commands<a href="#general-commands" class="hash-link" aria-label="Direct link to General commands" title="Direct link to General commands">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-create">make create<a href="#make-create" class="hash-link" aria-label="Direct link to make create" title="Direct link to make create">​</a></h3><p><code>make create</code></p><p>To initiate the management server setup, various components are created. This includes the provisioning of networks,
security groups, and a virtual machine. An application credential is also generated for authentication purposes. Once
the virtual machine is up and running, it is bootstrapped by cloning the specified git repository. Additionally,
specific tools are installed to facilitate the process.</p><p>Next, a local Kubernetes cluster is deployed using <a href="https://github.com/kubernetes-sigs/kind" target="_blank" rel="noopener noreferrer">kind</a>. The cluster acts as a foundation for further operations. During
the setup, the <a href="https://github.com/kubernetes-sigs/cluster-api" target="_blank" rel="noopener noreferrer">Cluster API</a>, as well as the Cluster API Provider (e.g. <a href="https://github.com/kubernetes-sigs/cluster-api-provider-openstack" target="_blank" rel="noopener noreferrer">CAPO</a>), are installed within the local cluster. This provider serves as the API server for
Kubernetes CAPI, enabling management and interaction with the cloud backends (e.g. OpenStack).</p><p>Finally, a test cluster is created utilizing Kubernetes CAPI. This test cluster allows for experimentation, validation,
and development within the CAPI environment.</p><blockquote><p>Note that <code>make create</code> will not create a testcluster if you have set <code>controller_count</code> to zero in your
environment file (<code>environment-&lt;yourcloud&gt;.tfvars</code>).</p></blockquote><blockquote><p>Note that <code>make create</code> does not copy local files to the management server, only some files are templated there from the <code>terraform/files/template</code> directory. If you want to change any of the scripts
being copied to the management server, you need to commit, push your changes, and run <code>make create</code> again.
<code>make create</code> will pull the latest changes from the git repository.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-get-kubeconfig">make get-kubeconfig<a href="#make-get-kubeconfig" class="hash-link" aria-label="Direct link to make get-kubeconfig" title="Direct link to make get-kubeconfig">​</a></h3><p><code>make get-kubeconfig</code></p><p>This will get the kubeconfig of the testcluster and store it in the file <code>testcluster.yaml.&lt;yourcloud&gt;</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-ssh">make ssh<a href="#make-ssh" class="hash-link" aria-label="Direct link to make ssh" title="Direct link to make ssh">​</a></h3><p><code>make ssh</code></p><p>This will ssh into the management server, using the username that was set in your <code>environment-&lt;yourcloud&gt;.tfvars</code>file. The default in the environment file is <code>ubuntu</code>.</p><blockquote><p>Note: there is also an alias to this <code>make login</code></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-openstack">make openstack<a href="#make-openstack" class="hash-link" aria-label="Direct link to make openstack" title="Direct link to make openstack">​</a></h3><p><code>make openstack</code></p><p>This will run openstack cli.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-k9s">make k9s<a href="#make-k9s" class="hash-link" aria-label="Direct link to make k9s" title="Direct link to make k9s">​</a></h3><p><code>make k9s</code></p><p>This will run k9s on the management server.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-log">make log<a href="#make-log" class="hash-link" aria-label="Direct link to make log" title="Direct link to make log">​</a></h3><p><code>make log CONSOLE=capi-mgmtcluster</code></p><p>This will show openstack console log of the management server. You can specify the console log you want to see by
setting the <code>CONSOLE</code> variable. The default is <code>capi-mgmtcluster</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-console">make console<a href="#make-console" class="hash-link" aria-label="Direct link to make console" title="Direct link to make console">​</a></h3><p><code>make console CONSOLE=capi-mgmtcluster</code></p><p>This will open openstack console of the management server in the browser using XDG-open. You can specify the console you
want to open by setting the <code>CONSOLE</code> variable. The default is <code>capi-mgmtcluster</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="teardown">Teardown<a href="#teardown" class="hash-link" aria-label="Direct link to Teardown" title="Direct link to Teardown">​</a></h2><blockquote><p>Note that <code>clean</code> and <code>fullclean</code> leave the <code>ubuntu-capi-image-$KUBERNETES_VERSION</code> image registered,
so it can be reused.
You need to manually unregister it, if you want your next deployment to register a new image with
the same kubernetes version number.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-clean">Make clean<a href="#make-clean" class="hash-link" aria-label="Direct link to Make clean" title="Direct link to Make clean">​</a></h3><p><code>make clean</code> does ssh to the capi management server to clean up the created clusters prior
to terraform cleaning up the resources it has created. This is sometimes insufficient to clean up
unfortunately, some error in the deployment may result in resources left around.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-fullclean">Make fullclean<a href="#make-fullclean" class="hash-link" aria-label="Direct link to Make fullclean" title="Direct link to Make fullclean">​</a></h3><p><code>make fullclean</code> uses a custom script (using the openstack CLI) to clean up everything
while trying to not hit any resources not created by the CAPI or terraform.
It is the recommended way for doing cleanups if <code>make clean</code> fails. Watch out for leftover
floating IP addresses and persistent volumes, as these can not be easily traced back to the
Cluster API created resources and may thus be left.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-purge">Make purge<a href="#make-purge" class="hash-link" aria-label="Direct link to Make purge" title="Direct link to Make purge">​</a></h3><p>You can purge the whole project via <code>make purge</code>. Be careful with that command as it will purge
<em>all resources in the OpenStack project</em> even those that have not been created through this
Terraform script or the Cluster API.
It requires the <a href="https://opendev.org/x/ospurge" target="_blank" rel="noopener noreferrer"><code>ospurge</code></a> tool.
Install it with <code>python3 -m pip install git+https://git.openstack.org/openstack/ospurge</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-commands">Testing commands<a href="#testing-commands" class="hash-link" aria-label="Direct link to Testing commands" title="Direct link to Testing commands">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-check">make check<a href="#make-check" class="hash-link" aria-label="Direct link to make check" title="Direct link to make check">​</a></h3><p><code>make check SONOMODE=...</code></p><p>This will run tests of the configuration on testcluster using <a href="https://sonobuoy.io/" target="_blank" rel="noopener noreferrer">sonobuoy</a>. It will also download the results and
print them to the console. Optionally you can also specify a mode by using for example <code>SONOMODE=&quot;--mode quick&quot;</code></p><blockquote><p>Note: This runs over 5000 tests and takes a long time to complete (~ 2 hours).</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-check-quick">make check-quick<a href="#make-check-quick" class="hash-link" aria-label="Direct link to make check-quick" title="Direct link to make check-quick">​</a></h3><p><code>make check-quick</code></p><p>This will run tests of the configuration on testcluster using sonobuoy with mode quick.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-check-conformance">make check-conformance<a href="#make-check-conformance" class="hash-link" aria-label="Direct link to make check-conformance" title="Direct link to make check-conformance">​</a></h3><p><code>make check-conformance</code></p><p>This will run tests of the configuration on testcluster using sonobuoy with mode conformance meaning it will test if the
cluster is conformant to the CNCF.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-check-storage">make check-storage<a href="#make-check-storage" class="hash-link" aria-label="Direct link to make check-storage" title="Direct link to make check-storage">​</a></h3><p><code>make check-storage</code></p><p>This will run tests of the configuration on testcluster using sonobuoy of the storage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-check-csi">make check-csi<a href="#make-check-csi" class="hash-link" aria-label="Direct link to make check-csi" title="Direct link to make check-csi">​</a></h3><p><code>make check-csi</code></p><p>This will run tests of the configuration on testcluster using sonobuoy of the CSI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-commands">Terraform commands<a href="#terraform-commands" class="hash-link" aria-label="Direct link to Terraform commands" title="Direct link to Terraform commands">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-init">make init<a href="#make-init" class="hash-link" aria-label="Direct link to make init" title="Direct link to make init">​</a></h3><p><code>make init</code></p><p>This will initialize terraform. It will download the required providers and modules.
It will also select or create a new workspace for you. The workspace name is the same as the
<code>ENVIROMENT</code> variable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-attach">make attach<a href="#make-attach" class="hash-link" aria-label="Direct link to make attach" title="Direct link to make attach">​</a></h3><p><code>make attach RESOURCE=&lt;resource-id&gt; PARAMS=...</code></p><p>This will attach a resource to the terraform state. This is useful if you have created a resource outside of terraform
and want to manage it with terraform.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-detach">make detach<a href="#make-detach" class="hash-link" aria-label="Direct link to make detach" title="Direct link to make detach">​</a></h3><p><code>make detach RESOURCE=&lt;resource-id&gt; PARAMS=...</code></p><p>This will detach a resource from the terraform state. This is useful if you have changed a resource outside of terraform
or you no longer want to manage it with terraform.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-state-push">make state-push<a href="#make-state-push" class="hash-link" aria-label="Direct link to make state-push" title="Direct link to make state-push">​</a></h3><p><code>make state-push</code></p><p>This will push the terraform state to specified storage if set. This is useful if you don&#x27;t want to store the state
locally.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-dry-run">make dry-run<a href="#make-dry-run" class="hash-link" aria-label="Direct link to make dry-run" title="Direct link to make dry-run">​</a></h3><p><code>make dry-run</code></p><p>This will run a dry-run of the terraform apply command. This is useful if you want to see what terraform will do before
actually doing it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-show">make show<a href="#make-show" class="hash-link" aria-label="Direct link to make show" title="Direct link to make show">​</a></h3><p><code>make show</code></p><p>This will show the terraform state. This is useful if you want to see what terraform is managing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-list">make list<a href="#make-list" class="hash-link" aria-label="Direct link to make list" title="Direct link to make list">​</a></h3><p><code>make list</code></p><p>This will list all the resources managed by terraform. This is useful if you want to see what terraform is managing.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SovereignCloudStack/docs-page/tree/main/docs/03-container/components/k8s-cluster-api-provider/doc/make-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/container/components/k8s-cluster-api-provider/doc/quickstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quickstart</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/container/components/k8s-cluster-api-provider/doc/application-credentials"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Application Credentials</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-commands" class="table-of-contents__link toc-highlight">General commands</a><ul><li><a href="#make-create" class="table-of-contents__link toc-highlight">make create</a></li><li><a href="#make-get-kubeconfig" class="table-of-contents__link toc-highlight">make get-kubeconfig</a></li><li><a href="#make-ssh" class="table-of-contents__link toc-highlight">make ssh</a></li><li><a href="#make-openstack" class="table-of-contents__link toc-highlight">make openstack</a></li><li><a href="#make-k9s" class="table-of-contents__link toc-highlight">make k9s</a></li><li><a href="#make-log" class="table-of-contents__link toc-highlight">make log</a></li><li><a href="#make-console" class="table-of-contents__link toc-highlight">make console</a></li></ul></li><li><a href="#teardown" class="table-of-contents__link toc-highlight">Teardown</a><ul><li><a href="#make-clean" class="table-of-contents__link toc-highlight">Make clean</a></li><li><a href="#make-fullclean" class="table-of-contents__link toc-highlight">Make fullclean</a></li><li><a href="#make-purge" class="table-of-contents__link toc-highlight">Make purge</a></li></ul></li><li><a href="#testing-commands" class="table-of-contents__link toc-highlight">Testing commands</a><ul><li><a href="#make-check" class="table-of-contents__link toc-highlight">make check</a></li><li><a href="#make-check-quick" class="table-of-contents__link toc-highlight">make check-quick</a></li><li><a href="#make-check-conformance" class="table-of-contents__link toc-highlight">make check-conformance</a></li><li><a href="#make-check-storage" class="table-of-contents__link toc-highlight">make check-storage</a></li><li><a href="#make-check-csi" class="table-of-contents__link toc-highlight">make check-csi</a></li></ul></li><li><a href="#terraform-commands" class="table-of-contents__link toc-highlight">Terraform commands</a><ul><li><a href="#make-init" class="table-of-contents__link toc-highlight">make init</a></li><li><a href="#make-attach" class="table-of-contents__link toc-highlight">make attach</a></li><li><a href="#make-detach" class="table-of-contents__link toc-highlight">make detach</a></li><li><a href="#make-state-push" class="table-of-contents__link toc-highlight">make state-push</a></li><li><a href="#make-dry-run" class="table-of-contents__link toc-highlight">make dry-run</a></li><li><a href="#make-show" class="table-of-contents__link toc-highlight">make show</a></li><li><a href="#make-list" class="table-of-contents__link toc-highlight">make list</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/!TiDqlLmEUaXqTemaLc:matrix.org?via=matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fosstodon.org/@sovereigncloudstack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SovereignCloudStack/docs-page" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Sovereign Cloud Stack, SCS and the logo are registered trademarks of the Open Source Business Alliance e.V. — Other trademarks are property of their respective owners.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fe345add.js"></script>
<script src="/assets/js/main.150bd3f2.js"></script>
</body>
</html>